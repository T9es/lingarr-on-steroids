import{d as D,m as F,r,c as d,w as P,b as g,e as b,x as M,k as v,L as B,j as m,p as u,g as o,D as $,M as W,F as G,y as q,H as j,G as z,S as i,q as C,C as N,I as X}from"./index-Ch4LkV9I.js";import{_ as R}from"./CardComponent.vue_vue_type_script_setup_true_lang-BTSWa718.js";import{_ as H}from"./InputComponent.vue_vue_type_script_setup_true_lang-B3DG7u6j.js";import{C as J}from"./CaretRightIcon-0y92JSx2.js";import{u as K}from"./useClickOutside-CMGy5ibi.js";import{_ as Q}from"./ToggleButton.vue_vue_type_script_setup_true_lang-BpuRAIPv.js";import{_ as Y}from"./SaveNotification.vue_vue_type_script_setup_true_lang-DmHm51hl.js";import"./useDebounce--iKAfTly.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"relative"},ee={key:0,class:"mb-1 block text-sm font-semibold"},te={key:0,class:"text-gray-400"},le={key:1,class:"text-primary-content"},ae=["onClick"],oe={key:1,class:"mt-2 space-y-2"},I=D({__name:"ScheduleSelector",props:{label:{},modelValue:{}},emits:["update:modelValue","update:validation"],setup(O,{emit:c}){const f=O,h=c,{translate:n}=F(),p=r(!1),w=r(),A=r(),a=r(""),E=r(!0),l=r(!1),V=d(()=>[{value:"every15min",label:n("settings.cronOptions.everyFifteenMinutes"),cron:"*/15 * * * *"},{value:"every30min",label:n("settings.cronOptions.everyThirtyMinutes"),cron:"*/30 * * * *"},{value:"hourly",label:n("settings.cronOptions.hourly"),cron:"0 * * * *"},{value:"every2hours",label:n("settings.cronOptions.everyTwoHours"),cron:"0 */2 * * *"},{value:"every4hours",label:n("settings.cronOptions.everyFourHours"),cron:"0 */4 * * *"},{value:"every6hours",label:n("settings.cronOptions.everySixHours"),cron:"0 */6 * * *"},{value:"twiceDaily",label:n("settings.cronOptions.twiceADay"),cron:"0 */12 * * *"},{value:"dailyMidnight",label:n("settings.cronOptions.dailyAtMidnight"),cron:"0 0 * * *"},{value:"dailyFour",label:n("settings.cronOptions.dailyAtFour"),cron:"0 4 * * *"},{value:"weeklySunday",label:n("settings.cronOptions.weeklyOnSundayAtMidnight"),cron:"0 0 * * 0"},{value:"custom",label:n("settings.cronOptions.custom"),cron:""}]),T=d(()=>V.value.find(e=>e.cron===f.modelValue&&e.value!=="custom")),_=d(()=>l.value?"custom":T.value?T.value.value:"custom"),x=d(()=>_.value==="custom"),L=d(()=>x.value&&f.modelValue?`${n("settings.cronOptions.custom")}: ${f.modelValue}`:V.value.find(S=>S.value===_.value)?.label||"");P(()=>f.modelValue,e=>{x.value&&(a.value=e)},{immediate:!0});const U=()=>{p.value=!p.value},k=e=>{p.value=!1,h("update:validation",!0),e.value==="custom"?(l.value=!0,a.value=f.modelValue||"0 * * * *"):(l.value=!1,h("update:modelValue",e.cron))},s=e=>{E.value&&h("update:modelValue",e),h("update:validation",E.value)},t=e=>_.value===e;return K(w,()=>{p.value=!1},A),(e,S)=>(b(),g("div",Z,[O.label?(b(),g("label",ee,m(O.label),1)):M("",!0),v("div",{ref_key:"excludeClickOutside",ref:A,class:"border-accent flex h-12 cursor-pointer items-center justify-between rounded-md border px-4 py-2",onClick:U},[L.value?(b(),g("span",le,m(L.value),1)):(b(),g("span",te,m(o(n)("settings.automation.translationScheduleLabel")),1)),u(J,{class:$([{"rotate-90":p.value},"arrow-right h-5 w-5 transition-transform duration-200"])},null,8,["class"])],512),B(v("ul",{ref_key:"clickOutside",ref:w,class:"border-accent bg-primary absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md border shadow-lg"},[(b(!0),g(G,null,q(V.value,y=>(b(),g("li",{key:y.value,class:$(["cursor-pointer px-4 py-2 hover:bg-accent/20",{"bg-accent/20":t(y.value)}]),onClick:ve=>k(y)},m(y.label),11,ae))),128))],512),[[W,p.value]]),x.value?(b(),g("div",oe,[u(H,{modelValue:a.value,"onUpdate:modelValue":[S[0]||(S[0]=y=>a.value=y),s],label:"",placeholder:"*/15 * * * *","validation-type":"cron","onUpdate:validation":S[1]||(S[1]=y=>E.value=y)},null,8,["modelValue"]),S[2]||(S[2]=j('<p class="text-xs text-gray-400"> Format: <code class="bg-accent/30 px-1 rounded">minute</code><code class="bg-accent/30 px-1 rounded">hour</code><code class="bg-accent/30 px-1 rounded">day</code><code class="bg-accent/30 px-1 rounded">month</code><code class="bg-accent/30 px-1 rounded">weekday</code> · Use <code class="bg-accent/30 px-1 rounded">*</code> for &quot;every&quot; · <code class="bg-accent/30 px-1 rounded">*/15</code> = every 15 </p>',1))])):M("",!0)]))}}),se={class:"flex flex-col space-y-4 pb-4"},ne={class:"flex flex-col space-y-4"},ie={class:"flex items-center space-x-2"},ue={class:"text-primary-content text-sm font-medium"},re={class:"font-semibold"},de={class:"font-semibold"},ce=D({__name:"AutomationSettings",setup(O){const c=r(null),f=r(!1),h=r(!1),n=r(!1),p=r(!1),w=r(!1),A=r(!1),a=z(),E=X(),{translate:l}=F(),V=d({get:()=>a.getSetting(i.AUTOMATION_ENABLED),set:s=>{a.updateSetting(i.AUTOMATION_ENABLED,s,!0),c.value?.show()}}),T=d({get:()=>a.getSetting(i.MOVIE_SCHEDULE),set:s=>{p.value&&(a.updateSetting(i.MOVIE_SCHEDULE,s,!0),c.value?.show())}}),_=d({get:()=>a.getSetting(i.SHOW_SCHEDULE),set:s=>{w.value&&(a.updateSetting(i.SHOW_SCHEDULE,s,!0),c.value?.show())}}),x=d({get:()=>a.getSetting(i.TRANSLATION_SCHEDULE),set:s=>{A.value&&(a.updateSetting(i.TRANSLATION_SCHEDULE,s,!0),c.value?.show())}}),L=d({get:()=>a.getSetting(i.MAX_TRANSLATIONS_PER_RUN),set:s=>{a.updateSetting(i.MAX_TRANSLATIONS_PER_RUN,s,!0),c.value?.show()}}),U=d({get:()=>a.getSetting(i.MOVIE_AGE_THRESHOLD),set:s=>{a.updateSetting(i.MOVIE_AGE_THRESHOLD,s,!0),c.value?.show()}}),k=d({get:()=>a.getSetting(i.SHOW_AGE_THRESHOLD),set:s=>{a.updateSetting(i.SHOW_AGE_THRESHOLD,s,!0),c.value?.show()}});return(s,t)=>(b(),g(G,null,[u(R,{title:o(l)("settings.indexing.title")},{description:C(()=>[N(m(o(l)("settings.indexing.description")),1)]),content:C(()=>[u(Y,{ref_key:"saveNotification",ref:c},null,512),v("div",se,[u(I,{modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e),label:o(l)("settings.indexing.indexingMoviesLabel"),"onUpdate:validation":t[1]||(t[1]=e=>p.value=e)},null,8,["modelValue","label"]),u(I,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=e=>_.value=e),label:o(l)("settings.indexing.indexingTvShowLabel"),"onUpdate:validation":t[3]||(t[3]=e=>w.value=e)},null,8,["modelValue","label"])])]),_:1},8,["title"]),u(R,{title:o(l)("settings.automation.title")},{description:C(()=>[N(m(o(l)("settings.automation.description"))+" ",1),v("a",{class:"cursor-pointer underline",onClick:t[4]||(t[4]=e=>o(E).push({name:"services-settings"}))},m(o(l)("settings.automation.descriptionLink")),1),t[14]||(t[14]=N(" . ",-1))]),content:C(()=>[v("div",ne,[v("div",ie,[v("span",null,m(o(l)("settings.automation.enableAutomatedTranslation")),1),u(Q,{modelValue:V.value,"onUpdate:modelValue":t[5]||(t[5]=e=>V.value=e)},{default:C(()=>[v("span",ue,m(V.value==="true"?o(l)("common.enabled"):o(l)("common.disabled")),1)]),_:1},8,["modelValue"])]),u(I,{modelValue:x.value,"onUpdate:modelValue":t[6]||(t[6]=e=>x.value=e),label:o(l)("settings.automation.translationScheduleLabel"),"onUpdate:validation":t[7]||(t[7]=e=>A.value=e)},null,8,["modelValue","label"]),v("span",re,m(o(l)("settings.automation.limitsHeader")),1),u(H,{modelValue:L.value,"onUpdate:modelValue":t[8]||(t[8]=e=>L.value=e),"input-type":"number","validation-type":"number","min-length":0,label:o(l)("settings.automation.scheduleLimitLabel"),"onUpdate:validation":t[9]||(t[9]=e=>f.value=e)},null,8,["modelValue","label"]),v("span",de,m(o(l)("settings.automation.defaultAgeThresholdLabel")),1),u(H,{modelValue:U.value,"onUpdate:modelValue":t[10]||(t[10]=e=>U.value=e),"input-type":"number","validation-type":"number","min-length":0,label:o(l)("settings.automation.movieAgeThresholdLabel"),"onUpdate:validation":t[11]||(t[11]=e=>h.value=e)},null,8,["modelValue","label"]),u(H,{modelValue:k.value,"onUpdate:modelValue":t[12]||(t[12]=e=>k.value=e),"input-type":"number","validation-type":"number","min-length":0,label:o(l)("settings.automation.showAgeThresholdLabel"),"onUpdate:validation":t[13]||(t[13]=e=>n.value=e)},null,8,["modelValue","label"])])]),_:1},8,["title"])],64))}}),me={class:"grid grid-flow-row auto-rows-max grid-cols-1 gap-4 p-4 xl:grid-cols-2 2xl:grid-cols-3"},xe=D({__name:"AutomationPage",setup(O){return(c,f)=>(b(),g("div",me,[u(ce)]))}});export{xe as default};
