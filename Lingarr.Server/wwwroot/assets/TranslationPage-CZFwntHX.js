import{A as ce,r as h,c as M,d as D,m as J,b as r,e as a,j as o,g as t,k as e,l as de,w as ee,x as u,p as v,D as E,q as $,C as T,F as B,y as G,n as ue,N as pe,O as ve,o as me,a as ge,f as P,L as z,M as H,E as W,P as fe}from"./index-Ch4LkV9I.js";import{T as R,a as j,M as be}from"./index-ML11zQTX.js";import{u as _e}from"./useDebounce--iKAfTly.js";import{_ as he,a as ye,b as xe}from"./SortControls.vue_vue_type_script_setup_true_lang-DAR29HPR.js";import{_ as we}from"./ReloadComponent.vue_vue_type_script_setup_true_lang-BiHkJTkN.js";import{T as ke}from"./TimesIcon-BnWx0jvB.js";import{L as Te}from"./LoaderCircleIcon--TJ8BGW4.js";import{T as Ce}from"./TrashIcon-CcHMfhdK.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{f as $e,a as Re}from"./date-BaQ8a7sT.js";import{a as S,_ as Le,T as Se}from"./PageLayout.vue_vue_type_script_setup_true_lang-Brc2-CeY.js";import"./useClickOutside-CMGy5ibi.js";const se=ce("testTranslation",()=>{const c=h(null),s=h(!1),l=h([]),m=h(null),i=h(null),b=M(()=>c.value!==null);function y(_){c.value=_,m.value=null,l.value=[]}function g(){c.value=null,m.value=null,l.value=[]}function f(){l.value=[],m.value=null}function w(_){l.value.push(_)}async function q(){if(!(!c.value||s.value)){s.value=!0,m.value=null,l.value=[],i.value=new AbortController;try{const C=(await fetch("/api/test-translation/start",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subtitlePath:c.value.subtitlePath,sourceLanguage:c.value.sourceLanguage,targetLanguage:c.value.targetLanguage}),signal:i.value.signal})).body?.getReader(),A=new TextDecoder;if(!C)throw new Error("Failed to get response reader");for(;;){const{done:F,value:N}=await C.read();if(F)break;const U=A.decode(N).split(`
`).filter(V=>V.startsWith("data: "));for(const V of U)try{const x=JSON.parse(V.substring(6));x.type==="log"?w({level:x.Level,message:x.Message,timestamp:x.Timestamp,details:x.Details}):x.type==="result"&&(m.value={success:x.Success,errorMessage:x.ErrorMessage,totalSubtitles:x.TotalSubtitles,translatedCount:x.TranslatedCount,duration:x.Duration})}catch{}}}catch(_){_.name!=="AbortError"&&w({level:"ERROR",message:`Connection error: ${_ instanceof Error?_.message:"Unknown error"}`,timestamp:new Date().toISOString()})}finally{s.value=!1,i.value=null}}}async function I(){i.value&&i.value.abort();try{await fetch("/api/test-translation/cancel",{method:"POST"}),w({level:"WARNING",message:"Cancel request sent...",timestamp:new Date().toISOString()})}catch(_){w({level:"ERROR",message:`Failed to cancel: ${_ instanceof Error?_.message:"Unknown error"}`,timestamp:new Date().toISOString()})}}return{activeTest:c,isRunning:s,logs:l,result:m,hasActiveTest:b,setActiveTest:y,clearActiveTest:g,clearLogs:f,startTest:q,cancelTest:I}}),Ae=["title"],K=D({__name:"TranslationStatus",props:{translationStatus:{}},setup(c){const{translate:s}=J();return(l,m)=>(a(),r("span",{title:c.translationStatus.toString()},o(t(s)(`common.status${c.translationStatus}`)),9,Ae))}}),Ee=["title"],Ie={class:"bg-secondary h-2 w-full overflow-hidden rounded-full brightness-125 select-none"},Q=D({__name:"TranslationProgress",props:{progress:{}},setup(c){return(s,l)=>(a(),r("div",{class:"relative grow select-none",title:`${c.progress}%`},[e("div",Ie,[e("div",{class:"h-full rounded-full bg-linear-to-r from-blue-500 to-purple-500 transition-all duration-1000 ease-out select-none",style:de({width:`${c.progress}%`})},null,4)])],8,Ee))}}),Ne={},Oe={viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Pe(c,s){return a(),r("svg",Oe,[...s[0]||(s[0]=[e("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},null,-1),e("path",{d:"M3 3v5h5"},null,-1)])])}const Me=te(Ne,[["render",Pe]]),je={key:0,class:"md:px-4"},De={key:1},qe=["disabled"],Ve={key:2,class:"md:space-x-2"},Fe=["disabled"],Ue=["disabled"],Y=D({__name:"TranslationAction",props:{status:{},onAction:{type:Function}},setup(c){const s=c,l=h(!1),m=M(()=>s.status===R.INPROGRESS),i=M(()=>s.status==R.COMPLETED||s.status==R.CANCELLED||s.status==R.FAILED||s.status==R.INTERRUPTED),b=async y=>{l.value=!0,await s.onAction(y),y==j.RETRY&&(l.value=!1)};return ee(()=>s.status,()=>{l.value=!1}),(y,g)=>l.value?(a(),r("div",je,[v(Te,{class:"h-5 w-5 animate-spin"})])):m.value?(a(),r("div",De,[e("button",{disabled:l.value,class:"md:px-4",onClick:g[0]||(g[0]=f=>b(t(j).CANCEL))},[v(ke,{class:"h-5 w-5 cursor-pointer"})],8,qe)])):i.value?(a(),r("div",Ve,[e("button",{disabled:l.value,class:"cursor-pointer",onClick:g[1]||(g[1]=f=>b(t(j).RETRY))},[v(Me,{class:"h-5 w-5"})],8,Fe),e("button",{disabled:l.value,class:"cursor-pointer",onClick:g[2]||(g[2]=f=>b(t(j).REMOVE))},[v(Ce,{class:"h-5 w-5"})],8,Ue)])):u("",!0)}}),Be=["title"],X=D({__name:"TranslationCompletedAt",props:{completedAt:{}},setup(c){return(s,l)=>(a(),r("span",{title:t($e)(c.completedAt)},o(t(Re)(c.completedAt)),9,Be))}}),Ge={},ze={viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"4"};function We(c,s){return a(),r("svg",ze,[...s[0]||(s[0]=[e("path",{d:"M5 13l4 4L19 7"},null,-1)])])}const Ye=te(Ge,[["render",We]]),Je={class:"inline-flex items-center"},He=["id","checked","disabled"],Ke=["for"],Z=D({__name:"CheckboxComponent",props:{modelValue:{type:Boolean},id:{default:`checkbox-${Math.random().toString(36).substring(2,9)}`},label:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(c,{emit:s}){const l=s,m=i=>{const b=i.target;l("update:modelValue",b.checked),l("change",b.checked)};return(i,b)=>(a(),r("div",Je,[e("input",{id:c.id,type:"checkbox",checked:c.modelValue,disabled:c.disabled,class:"border-accent bg-secondary checked:bg-accent focus:ring-accent relative h-4 w-4 cursor-pointer appearance-none rounded border focus:ring-1 focus:ring-offset-1 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50",onChange:b[0]||(b[0]=y=>m(y))},null,40,He),v(Ye,{class:E(["text-primary-content pointer-events-none absolute h-4 w-4 fill-none",{hidden:!c.modelValue}])},null,8,["class"]),c.label?(a(),r("label",{key:0,for:c.id,class:"ml-2 cursor-pointer"},o(c.label),9,Ke)):u("",!0)]))}}),Qe={class:"w-full"},Xe={key:0,class:"bg-tertiary mb-4 rounded-lg p-4"},Ze={class:"flex items-center justify-between"},et={class:"text-lg font-semibold"},tt={class:"text-secondary-content text-sm"},st={class:"mt-2 flex gap-2"},ot={class:"flex gap-2"},nt={key:1,class:"bg-tertiary mb-4 rounded-lg p-8 text-center"},at={class:"text-secondary-content"},rt={class:"mb-2 text-lg font-semibold"},lt={class:"text-sm"},it={key:0,class:"text-error"},ct={key:1},dt={key:2},ut={class:"bg-secondary overflow-hidden rounded-lg"},pt={class:"bg-tertiary flex items-center justify-between px-4 py-2"},vt={class:"text-sm font-semibold"},mt={key:0,class:"flex h-full items-center justify-center text-gray-500"},gt={class:"mr-2 text-gray-400"},ft={key:0,class:"ml-4 whitespace-pre-wrap text-xs text-gray-500"},bt=D({__name:"TestPanel",setup(c){const{translate:s}=J(),l=se(),m=h(null);function i(y){return new Date(y).toLocaleTimeString()}function b(y){switch(y.toUpperCase()){case"ERROR":return"text-red-500";case"WARNING":return"text-orange-500";case"INFORMATION":return"text-green-500";default:return"text-blue-500"}}return ee(()=>l.logs.length,async()=>{await ue(),m.value&&(m.value.scrollTop=m.value.scrollHeight)}),(y,g)=>(a(),r("div",Qe,[t(l).activeTest?(a(),r("div",Xe,[e("div",Ze,[e("div",null,[e("h2",et,o(t(l).activeTest.title),1),e("p",tt,o(t(l).activeTest.subtitlePath),1),e("div",st,[v(S,{classes:"text-primary-content border-accent bg-secondary"},{default:$(()=>[T(o(t(l).activeTest.sourceLanguage.toUpperCase()),1)]),_:1}),g[3]||(g[3]=e("span",{class:"text-secondary-content"},"→",-1)),v(S,{classes:"text-primary-content border-accent bg-secondary"},{default:$(()=>[T(o(t(l).activeTest.targetLanguage.toUpperCase()),1)]),_:1})])]),e("div",ot,[t(l).isRunning?(a(),r("button",{key:1,class:"bg-error hover:bg-error/80 cursor-pointer rounded px-4 py-2 text-sm font-medium text-white transition",onClick:g[1]||(g[1]=f=>t(l).cancelTest())},o(t(s)("translations.cancel")),1)):(a(),r("button",{key:0,class:"bg-accent hover:bg-accent/80 cursor-pointer rounded px-4 py-2 text-sm font-medium text-white transition",onClick:g[0]||(g[0]=f=>t(l).startTest())},o(t(s)("translations.startTest")),1))])])])):(a(),r("div",nt,[e("p",at,o(t(s)("translations.noTestSelected")),1)])),t(l).result?(a(),r("div",{key:2,class:E(["mb-4 rounded-lg p-4",t(l).result.success?"bg-success/20 border border-success":"bg-error/20 border border-error"])},[e("h2",rt,o(t(l).result.success?t(s)("translations.testSuccess"):t(s)("translations.testFailed")),1),e("div",lt,[t(l).result.errorMessage?(a(),r("p",it,o(t(l).result.errorMessage),1)):u("",!0),t(l).result.totalSubtitles?(a(),r("p",ct,o(t(s)("translations.translated"))+": "+o(t(l).result.translatedCount)+"/"+o(t(l).result.totalSubtitles),1)):u("",!0),t(l).result.duration?(a(),r("p",dt,o(t(s)("translations.duration"))+": "+o(t(l).result.duration.toFixed(1))+"s ",1)):u("",!0)])],2)):u("",!0),e("div",ut,[e("div",pt,[e("h2",vt,o(t(s)("translations.logs")),1),e("button",{class:"bg-warning hover:bg-warning/80 cursor-pointer rounded px-2 py-1 text-xs text-white transition",onClick:g[2]||(g[2]=f=>t(l).clearLogs())},o(t(s)("translations.clearLogs")),1)]),e("div",{ref_key:"logContainer",ref:m,class:"bg-primary h-[50vh] overflow-y-auto p-2 font-mono text-xs"},[t(l).logs.length===0?(a(),r("div",mt,o(t(s)("translations.waitingForLogs")),1)):u("",!0),(a(!0),r(B,null,G(t(l).logs,(f,w)=>(a(),r("div",{key:w,class:"border-secondary/30 border-b py-1"},[e("span",gt,o(i(f.timestamp)),1),e("span",{class:E([b(f.level),"mr-2 font-semibold"])}," ["+o(f.level)+"] ",3),e("span",null,o(f.message),1),f.details?(a(),r("div",ft,o(f.details),1)):u("",!0)]))),128))],512)])]))}}),_t={class:"w-full"},ht={class:"bg-tertiary border-accent flex border-b"},yt={key:0,class:"bg-accent absolute -right-1 -top-1 h-2 w-2 animate-pulse rounded-full"},xt={class:"bg-tertiary flex flex-wrap items-center justify-between gap-2 p-4"},wt={class:"flex w-full flex-col gap-2 md:w-fit md:flex-row md:justify-between md:space-x-2"},kt={class:"w-full space-y-4 px-4 py-4"},Tt={key:0,class:"relative overflow-hidden rounded-lg border border-blue-500/30 bg-gradient-to-br from-blue-500/10 via-secondary to-purple-500/10 p-4 shadow-lg backdrop-blur-sm"},Ct={class:"relative mb-4 flex items-center justify-between"},$t={class:"flex items-center gap-3"},Rt={class:"text-base font-bold uppercase tracking-wide"},Lt={class:"rounded-full bg-gradient-to-r from-blue-500 to-purple-500 px-3 py-1 text-xs font-bold text-white shadow-lg"},St={class:"relative space-y-3"},At={class:"space-y-1"},Et={class:"flex items-center gap-2"},It={class:"font-semibold"},Nt={class:"text-secondary-content text-xs"},Ot={class:"flex w-full items-center gap-3 md:w-1/2"},Pt={class:"min-w-[3.5rem] rounded-full bg-secondary/80 px-2 py-0.5 text-center text-xs font-semibold text-primary-content"},Mt={key:1,class:"relative overflow-hidden rounded-lg border border-red-500/30 bg-gradient-to-br from-red-500/10 via-secondary to-orange-500/10 p-4 shadow-lg backdrop-blur-sm"},jt={class:"relative mb-4 flex items-center justify-between"},Dt={class:"flex items-center gap-3"},qt={class:"text-base font-bold uppercase tracking-wide"},Vt=["disabled"],Ft={key:0,class:"animate-spin"},Ut={class:"max-h-64 space-y-3 overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-red-500/20 scrollbar-track-transparent"},Bt={class:"flex items-center gap-2"},Gt={class:"font-semibold"},zt={class:"mt-1 flex flex-wrap items-center gap-2 text-xs"},Wt={class:"text-secondary-content"},Yt={class:"flex items-center gap-2"},Jt=["title","onClick"],Ht={class:"border-accent hidden border-b font-bold md:grid md:grid-cols-12"},Kt={class:"col-span-4 px-4 py-2"},Qt={class:"col-span-1 px-4 py-2"},Xt={class:"col-span-1 px-4 py-2"},Zt={class:"col-span-1 px-4 py-2"},es={class:"col-span-1 px-4 py-2"},ts={class:"col-span-1 flex justify-end px-4 py-2"},ss={key:0,class:"col-span-1 flex items-center justify-center px-4 py-2"},os={class:"deletable float-right w-5 md:hidden"},ns={class:"mb-2 md:col-span-4 md:mb-0 md:px-4 md:py-2"},as=["id"],rs={class:"flex items-center gap-2"},ls=["title"],is={key:1},cs={class:"mb-2 md:col-span-1 md:mb-0 md:px-4 md:py-2"},ds={class:"font-bold md:hidden"},us={class:"mb-2 md:col-span-1 md:mb-0 md:px-4 md:py-2"},ps={class:"font-bold md:hidden"},vs={class:"mb-2 md:col-span-1 md:mb-0 md:px-4 md:py-2"},ms={class:"font-bold md:hidden"},gs={key:0,class:"w-full"},fs={class:"mr-2 font-bold md:hidden"},bs={class:"mb-2 md:col-span-1 md:mb-0 md:px-4 md:py-2"},_s={class:"font-bold md:hidden"},hs={class:"hidden items-center justify-between md:col-span-1 md:flex md:justify-end md:py-2"},ys={class:"flex items-center gap-1"},xs=["title","onClick"],ws=["title","onClick"],ks={key:0,class:"col-span-1 flex items-center justify-end py-2 md:justify-center md:px-4"},Ts={class:"p-4"},Cs={key:0,class:"bg-black/60 fixed inset-0 z-40 flex items-center justify-center"},$s={class:"bg-tertiary max-h-[80vh] w-full max-w-3xl overflow-hidden rounded-lg shadow-lg"},Rs={class:"border-accent flex items-center justify-between border-b px-4 py-2"},Ls={class:"text-lg font-semibold"},Ss={key:0,class:"text-secondary-content text-xs"},As={class:"bg-secondary h-[60vh] overflow-y-auto p-3 font-mono text-xs"},Es={key:0,class:"flex h-full items-center justify-center text-gray-400"},Is={key:1,class:"text-error"},Ns={key:2,class:"flex h-full items-center justify-center text-gray-400"},Os={key:3,class:"space-y-1"},Ps={class:"mr-2 text-gray-400"},Ms={key:0,class:"ml-4 whitespace-pre-wrap text-[0.7rem] text-gray-500"},Hs=D({__name:"TranslationPage",setup(c){const{translate:s}=J(),l=pe(),m=h(),i=ve(),b=se(),y=d=>{i.updateActiveCount(d.count)},g=h(!1),f=h(!1),w=h(null),q=h(null),I=h([]),_=h(!1),C=h("list"),A=M(()=>i.getTranslationRequests),F=M(()=>A.value.items.filter(d=>d.status===R.INPROGRESS)),N=M(()=>A.value.items.filter(d=>d.status===R.FAILED)),O=M({get:()=>i.filter,set:_e(d=>{i.setFilter(d)},300)});async function U(d,p){switch(p){case j.CANCEL:return await i.cancel(d);case j.REMOVE:return await i.remove(d);case j.RETRY:return await i.retry(d)}}async function V(d){if(d.status===R.FAILED){g.value=!0,f.value=!0,w.value=null,q.value=d,I.value=[];try{I.value=await i.getLogs(d.id)}catch{w.value=s("translations.loadLogsError")}finally{f.value=!1}}}function x(){g.value=!1,f.value=!1,w.value=null,q.value=null,I.value=[]}const oe=async()=>{if(!(!N.value.length||_.value)){_.value=!0;try{const d=[...N.value];for(const p of d)await i.retry(p),await i.remove(p);await i.fetch()}finally{_.value=!1}}};function ne(d){d.subtitleToTranslate&&(b.setActiveTest({subtitlePath:d.subtitleToTranslate,sourceLanguage:d.sourceLanguage,targetLanguage:d.targetLanguage,title:d.title}),C.value="test",b.startTest())}me(async()=>{await i.fetch(),await i.getActiveCount(),m.value=await l.connect("TranslationRequests","/signalr/TranslationRequests"),await m.value.joinGroup({group:"TranslationRequests"}),m.value.on("RequestProgress",i.updateProgress),m.value.on("RequestActive",y)}),ge(async()=>{m.value?.off("RequestProgress",i.updateProgress),m.value?.off("RequestActive",y)});const L=h(!1),ae=()=>{L.value=!L.value,L.value||i.clearSelection()},re=async()=>{for(const d of i.getSelectedRequests)await i.remove(d);i.clearSelection(),i.fetch()};function le(d){switch(d.toUpperCase()){case"ERROR":return"text-red-500";case"WARNING":return"text-orange-500";case"INFORMATION":return"text-green-500";default:return"text-blue-500"}}return(d,p)=>{const ie=fe("show-title");return a(),P(Le,null,{default:$(()=>[e("div",_t,[e("div",ht,[e("button",{class:E(["px-6 py-3 font-medium transition-colors",C.value==="list"?"border-accent border-b-2 text-accent":"text-secondary-content hover:text-primary-content"]),onClick:p[0]||(p[0]=n=>C.value="list")},o(t(s)("translations.tabList")),3),e("button",{class:E(["relative px-6 py-3 font-medium transition-colors",C.value==="test"?"border-accent border-b-2 text-accent":"text-secondary-content hover:text-primary-content"]),onClick:p[1]||(p[1]=n=>C.value="test")},[T(o(t(s)("translations.tabRunTest"))+" ",1),t(b).isRunning?(a(),r("span",yt)):u("",!0)],2)]),z(e("div",null,[e("div",xt,[v(he,{modelValue:O.value,"onUpdate:modelValue":p[2]||(p[2]=n=>O.value=n)},null,8,["modelValue"]),e("div",wt,[L.value?(a(),r("button",{key:0,class:"border-accent text-primary-content hover:text-primary-content/50 cursor-pointer rounded-md border px-2 py-1 transition-colors",onClick:re},o(t(s)("translations.delete"))+" ("+o(t(i).selectedRequests.length)+") ",1)):u("",!0),e("button",{class:"border-accent text-primary-content hover:text-primary-content/50 cursor-pointer rounded-md border px-2 py-1 transition-colors",onClick:ae},o(L.value?t(s)("translations.cancel"):t(s)("translations.select")),1),v(ye,{modelValue:O.value,"onUpdate:modelValue":p[3]||(p[3]=n=>O.value=n),options:[{label:t(s)("common.sortByAdded"),value:"CreatedAt"},{label:t(s)("common.sortByCompleted"),value:"CompletedAt"},{label:t(s)("common.sortByTitle"),value:"Title"}]},null,8,["modelValue","options"])])]),e("div",kt,[F.value.length?(a(),r("div",Tt,[p[8]||(p[8]=e("div",{class:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 animate-pulse"},null,-1)),e("div",Ct,[e("div",$t,[p[7]||(p[7]=e("div",{class:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-purple-500"},[e("span",{class:"text-sm font-bold text-white"},"▶")],-1)),e("h2",Rt,o(t(s)("common.statusInProgress")),1)]),e("span",Lt,o(F.value.length)+" "+o(t(s)("common.items")),1)]),e("div",St,[(a(!0),r(B,null,G(F.value,n=>(a(),r("div",{key:`active-${n.id}`,class:"group relative overflow-hidden rounded-lg border border-blue-500/20 bg-tertiary/80 px-4 py-3 shadow-md transition-all duration-300 hover:border-blue-500/40 hover:shadow-blue-500/10 md:flex md:items-center md:justify-between"},[e("div",At,[e("div",Et,[e("span",It,o(n.title),1),n.isPriorityMedia?(a(),P(S,{key:0,classes:"border-accent bg-accent text-xs text-primary-content"},{default:$(()=>[T(o(t(s)("translations.priority")),1)]),_:1})):u("",!0),v(S,{classes:"text-primary-content border-accent bg-secondary text-xs"},{default:$(()=>[T(o(n.sourceLanguage.toUpperCase())+" → "+o(n.targetLanguage.toUpperCase()),1)]),_:2},1024)]),e("div",Nt,[v(K,{"translation-status":n.status},null,8,["translation-status"])])]),e("div",Ot,[v(Q,{progress:n.progress??0},null,8,["progress"]),e("span",Pt,o((n.progress??0).toString())+"% ",1)])]))),128))])])):u("",!0),N.value.length?(a(),r("div",Mt,[e("div",jt,[e("div",Dt,[p[9]||(p[9]=e("div",{class:"flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-red-500 to-orange-500"},[e("span",{class:"text-sm font-bold text-white"},"✕")],-1)),e("h2",qt,o(t(s)("common.statusFailed")),1)]),e("button",{class:"flex items-center gap-2 rounded-full bg-gradient-to-r from-red-500 to-orange-500 px-4 py-1.5 text-xs font-bold text-white shadow-lg transition-all duration-300 hover:shadow-red-500/30 hover:scale-105 disabled:cursor-not-allowed disabled:opacity-60",disabled:_.value,onClick:oe},[_.value?(a(),r("span",Ft,"⟳")):u("",!0),e("span",null,o(t(s)("common.retry"))+" ("+o(N.value.length)+")",1)],8,Vt)]),e("div",Ut,[(a(!0),r(B,null,G(N.value,n=>(a(),r("div",{key:`failed-${n.id}`,class:"group relative overflow-hidden rounded-lg border border-red-500/20 bg-tertiary/80 px-4 py-3 shadow-md transition-all duration-300 hover:border-red-500/40 md:flex md:items-center md:justify-between"},[e("div",null,[e("div",Bt,[e("span",Gt,o(n.title),1),n.isPriorityMedia?(a(),P(S,{key:0,classes:"border-accent bg-accent text-xs text-primary-content"},{default:$(()=>[T(o(t(s)("translations.priority")),1)]),_:1})):u("",!0)]),e("div",zt,[v(S,{classes:"text-primary-content border-accent bg-secondary"},{default:$(()=>[T(o(n.sourceLanguage.toUpperCase())+" → "+o(n.targetLanguage.toUpperCase()),1)]),_:2},1024),e("span",Wt,[n.completedAt?(a(),P(X,{key:0,"completed-at":n.completedAt},null,8,["completed-at"])):u("",!0)])])]),e("div",Yt,[e("button",{class:"border-accent hover:bg-accent cursor-pointer rounded border px-2 py-1 text-xs transition-colors",title:t(s)("translations.viewLogs"),onClick:W(k=>V(n),["stop"])},o(t(s)("translations.logs")),9,Jt),v(Y,{status:n.status,"on-action":k=>U(n,k)},null,8,["status","on-action"])])]))),128))])])):u("",!0),e("div",Ht,[e("div",Kt,o(t(s)("translations.title")),1),e("div",Qt,o(t(s)("translations.source")),1),e("div",Xt,o(t(s)("translations.target")),1),e("div",Zt,o(t(s)("translations.status")),1),e("div",{class:E(["px-4 py-2",L.value?"col-span-1":"col-span-2"])},o(t(s)("translations.progress")),3),e("div",es,o(t(s)("translations.completed")),1),e("div",ts,[v(we,{"onToggle:update":p[4]||(p[4]=n=>t(i).fetch())})]),L.value?(a(),r("div",ss,[v(Z,{"model-value":t(i).selectAll,onChange:p[5]||(p[5]=n=>t(i).toggleSelectAll())},null,8,["model-value"])])):u("",!0)]),(a(!0),r(B,null,G(A.value.items,n=>(a(),r("div",{key:n.id,class:"md:border-accent rounded-lg py-4 shadow-sm md:grid md:grid-cols-12 md:rounded-none md:border-b md:bg-transparent md:p-0 md:shadow-none"},[e("div",os,[v(Y,{status:n.status,"on-action":k=>U(n,k)},null,8,["status","on-action"])]),e("div",ns,[e("span",{id:`deletable-${n.id}`,class:"font-bold md:hidden"},o(t(s)("translations.title"))+":  ",9,as),e("div",rs,[n.mediaType===t(be).EPISODE?z((a(),r("span",{key:0,class:"block cursor-help",title:n.title},[T(o(n.title),1)],8,ls)),[[ie]]):(a(),r("span",is,o(n.title),1)),n.isPriorityMedia?(a(),P(S,{key:2,classes:"border-accent bg-accent text-xs text-primary-content"},{default:$(()=>[T(o(t(s)("translations.priority")),1)]),_:1})):u("",!0)])]),e("div",cs,[e("span",ds,o(t(s)("translations.source"))+":  ",1),v(S,{classes:"text-primary-content border-accent bg-secondary"},{default:$(()=>[T(o(n.sourceLanguage.toUpperCase()),1)]),_:2},1024)]),e("div",us,[e("span",ps,o(t(s)("translations.target"))+":  ",1),v(S,{classes:"text-primary-content border-accent bg-secondary"},{default:$(()=>[T(o(n.targetLanguage.toUpperCase()),1)]),_:2},1024)]),e("div",vs,[e("span",ms,o(t(s)("translations.status"))+":  ",1),v(K,{"translation-status":n.status},null,8,["translation-status"])]),e("div",{class:E(["mb-2 flex items-center md:mb-0 md:px-4 md:py-2",L.value?"md:col-span-1":"md:col-span-2"])},[n.status===t(R).INPROGRESS?(a(),r("div",gs,[e("span",fs,o(t(s)("translations.progress"))+":  ",1),v(Q,{progress:n.progress??0},null,8,["progress"])])):u("",!0)],2),e("div",bs,[e("span",_s,o(t(s)("translations.completed"))+":  ",1),n.completedAt?(a(),P(X,{key:0,"completed-at":n.completedAt},null,8,["completed-at"])):u("",!0)]),e("div",hs,[e("div",ys,[n.subtitleToTranslate?(a(),r("button",{key:0,class:"border-accent hover:bg-accent cursor-pointer rounded border p-1 transition-colors",title:t(s)("translations.runTest"),onClick:W(k=>ne(n),["stop"])},[v(Se,{class:"h-4 w-4"})],8,xs)):u("",!0),n.status===t(R).FAILED?(a(),r("button",{key:1,class:"border-accent hover:bg-accent cursor-pointer rounded border px-2 py-1 text-xs transition-colors",title:t(s)("translations.viewLogs"),onClick:W(k=>V(n),["stop"])},o(t(s)("translations.logs")),9,ws)):u("",!0),v(Y,{status:n.status,"on-action":k=>U(n,k)},null,8,["status","on-action"])])]),L.value?(a(),r("div",ks,[v(Z,{"model-value":t(i).selectedRequests.some(k=>k.id===n.id),onChange:k=>t(i).toggleSelect(n)},null,8,["model-value","onChange"])])):u("",!0)]))),128))]),A.value.totalCount?(a(),P(xe,{key:0,modelValue:O.value,"onUpdate:modelValue":p[6]||(p[6]=n=>O.value=n),"total-count":A.value.totalCount,"page-size":A.value.pageSize},null,8,["modelValue","total-count","page-size"])):u("",!0)],512),[[H,C.value==="list"]]),z(e("div",Ts,[v(bt)],512),[[H,C.value==="test"]]),g.value?(a(),r("div",Cs,[e("div",$s,[e("div",Rs,[e("div",null,[e("h2",Ls,o(t(s)("translations.logs")),1),q.value?(a(),r("p",Ss,o(q.value.title),1)):u("",!0)]),e("button",{class:"border-accent hover:bg-accent cursor-pointer rounded border px-3 py-1 text-xs transition-colors",onClick:x},o(t(s)("translations.close")),1)]),e("div",As,[f.value?(a(),r("div",Es,o(t(s)("translations.waitingForLogs")),1)):w.value?(a(),r("div",Is,o(w.value),1)):I.value.length===0?(a(),r("div",Ns,o(t(s)("translations.noLogs")),1)):(a(),r("div",Os,[(a(!0),r(B,null,G(I.value,n=>(a(),r("div",{key:n.id,class:"border-secondary/30 border-b pb-1"},[e("span",Ps,o(new Date(n.createdAt).toLocaleTimeString()),1),e("span",{class:E(["mr-2 font-semibold",le(n.level)])}," ["+o(n.level)+"] ",3),e("span",null,o(n.message),1),n.details?(a(),r("div",Ms,o(n.details),1)):u("",!0)]))),128))]))])])])):u("",!0)])]),_:1})}}});export{Hs as default};
